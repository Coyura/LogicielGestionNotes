import sys, json
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from matplotlib.path import Path
from matplotlib.spines import Spine
from matplotlib.projections.polar import PolarAxes
from matplotlib.projections import register_projection

filename = "dataNotesV2.json"

def lireJSON(filename):
    with open(filename) as json_file:
        dico = json.load(json_file)
        return dico
    return None

mesDatas = {}
mesDatas = lireJSON(filename)

# notesMatEleve = []
# matEleve = mesDatas["academies"][0]["etablissements"][0]["classes"][0]["eleves"][0]["matieres"]
# noteMatEleve = mesDatas["academies"][0]["etablissements"][0]["classes"][0]["eleves"][0]["matieres"][0]["notes"]
# print(noteMatEleve)
# print(matEleve)

# df = pd.DataFrame(mesDatas["academies"][0]["etablissements"][0]["classes"][0]["eleves"][0]["matieres"][0]["notes"])
# print (df)

# for n in noteMatEleve["notes"] :
#     noteCoef = notesMatEleve["notes"][coef]
#     moyenneEleveMat = notesMatEleve["coef"]

matEleve = mesDatas["academies"][0]["etablissements"][0]["classes"][0]["eleves"][0]["matieres"]
noteMatEleve = mesDatas["academies"][0]["etablissements"][0]["classes"][0]["eleves"][0]["matieres"][0]["notes"]
# print(noteMatEleve)

# for m in matEleve:
#     noteCoef = (sum(df["coef"]*df["valeur"]))/(sum(df["coef"]))
#     # print (noteCoef)


for m in matEleve:
    notes=m["notes"]
    sumCoef=0
    sumNotes=0
    for n in notes :
        coefNote=n["coef"]
        valeurNote=n["valeur"]
        sumNotes = sumNotes + (coefNote*valeurNote)
        sumCoef = sumCoef + coefNote
    moyenneMat = sumNotes/sumCoef
    print(m["nom"], moyenneMat)
    # notes=matiere["notes"]
    # noteCoef = (sum(notes["coef"]*notes["valeur"]))/(sum(notes["coef"]))
    # print (noteCoef)